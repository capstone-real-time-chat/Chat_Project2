프론트에서 닉네임 사용하는 방법: FastAPI 백엔드에서 발급한 access_token(JWT) 쿠키를
프론트에서 디코딩하여 닉네임 정보를 추출하고 사용



일반, 카카오 로그인을 하면 백엔드 서버는 JWT 토큰을 쿠키에 담아 보냅니다. JWT 토큰의 payload에 다음과 같이 사용자 닉네임이 포함되도록 코드를 수정했습니다.
#json
{
  "sub": "1",
  "nickname": "민진"
}

쿠키에서 제가 발급한 토큰을 읽고 꺼내려면 jwt-decode 라이브러리를 설치해야 합니다. 그 후 작성하는 닉네임 추출 함수를 예시로 아래에 적겠습니다. (정확한지는 모릅니다...)
#ts
// utils/token.ts

import jwtDecode from 'jwt-decode';

interface JwtPayload {
  sub: string;
  nickname: string;
}

export function getNicknameFromToken(): string | null {
  const token = document.cookie
    .split('; ')
    .find(row => row.startsWith('access_token='))
    ?.split('=')[1];

  if (!token) return null;

  try {
    const decoded = jwtDecode<JwtPayload>(token);
    return decoded.nickname;
  } catch (e) {
    console.error('JWT 디코딩 실패:', e);
    return null;
  }
}



토큰을 디코딩 한 후 닉네임 데이터를 쓸 수 있게 됐을 때!! 
import 해서 nickname 가져오고 바로 적용하면 되는 것 같습니다. 예시 사용 방법을 아래에 작성하겠습니다. (정확히는 모릅니다...)
1. 로그인 시 닉네임을 표시하는 컴포넌트 생성
#tsx
// components/ProfileBadge.tsx
import { useEffect, useState } from 'react';
import { getNicknameFromToken } from '../utils/token';

function ProfileBadge() {
  const [nickname, setNickname] = useState<string | null>(null);

  useEffect(() => {
    const name = getNicknameFromToken();
    setNickname(name);
  }, []);

  if (!nickname) return null;

  return (
    <div style={{
      display: 'flex',
      alignItems: 'center',
      position: 'absolute',
      top: '16px',
      right: '16px',
      background: '#f0f0f0',
      borderRadius: '100px',
      padding: '8px 12px',
      fontWeight: 600
    }}>
      <div style={{
        width: '32px',
        height: '32px',
        borderRadius: '50%',
        backgroundColor: '#374151',
        color: 'white',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        marginRight: '8px'
      }}>
        {nickname[0]} {/* 첫 글자 프로필 둥글게 */}
      </div>
      <span>{nickname}</span>
    </div>
  );
}

export default ProfileBadge;

2. 채팅창 닉네임 자동 삽입(?!?!?!?!?!?!!! 맞나요?)
#tsx
import { getNicknameFromToken } from './utils/token';

function ChatInput() {
  const nickname = getNicknameFromToken();

  const sendMessage = (message: string) => {
    const fullMessage = `${nickname}: ${message}`;
    // 서버로 메시지 전송
  };

  return (
    <input
      type="text"
      placeholder="메시지를 입력하세요"
      onKeyDown={(e) => {
        if (e.key === 'Enter') sendMessage(e.currentTarget.value);
      }}
    />
  );
}

